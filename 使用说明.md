# 智能图片识别系统使用说明

## 功能概述
智能图片识别系统支持多种AI模型提供商，可以对各种类型的图片进行智能识别和分析。

## 快速开始

### 1. 启动系统
```bash
# 启动后端服务器
cd backend
node server.js

# 启动前端应用（新终端窗口）
npm run dev
```

### 2. 配置AI模型

#### 2.1 基本配置步骤
1. 点击"模型配置"按钮进入设置页面
2. 选择要配置的AI提供商（Gemini、DeepSeek、OpenAI）
3. 输入对应的API密钥和API地址
4. 点击"测试连接"验证配置是否正确
5. 保存配置并返回主页

#### 2.2 支持的提供商

**Gemini**
- API地址：`https://generativelanguage.googleapis.com/v1beta`
- 支持模型：
  - gemini-2.5-pro-preview-03-25
  - gemini-2.5-pro-preview-05-06
  - gemini-2.5-flash-preview-04-17-thinking
  - gemini-2.5-pro-exp-03-25

**DeepSeek**
- API地址：`https://api.deepseek.com/v1`
- 支持模型：deepseek-chat

**OpenAI**
- API地址：`https://api.openai.com/v1`
- 支持模型：gpt-4、gpt-4-turbo、gpt-3.5-turbo

#### 2.3 自定义模型配置
如果你需要使用自定义的AI模型：
1. 在模型配置页面添加自定义模型名称
2. 系统会自动区分同名模型，显示为"模型名 (提供商名 - 自定义)"格式

#### 2.4 重名模型处理
当多个提供商有相同名称的模型时，系统会自动区分：
- 内置模型：`gemini-2.5-pro-preview-05-06 (Gemini)`
- 自定义模型：`gemini-2.5-pro-preview-05-06 (自定义提供商 - 自定义)`

### 3. 图片识别流程

#### 3.1 上传图片
- 支持格式：JPEG、PNG、WebP、GIF、BMP、TIFF
- 文件大小限制：10MB
- 拖拽或点击上传

#### 3.2 选择识别类型
系统提供12种专门的识别类型：

1. **🔍 智能识别** - 自动判断图片类型并识别
2. **📜 古籍文献识别** - 专门识别古文字和文献
3. **🧾 票据类识别** - 识别发票、收据等票据信息
4. **📄 文档识别** - 识别文档中的文字内容
5. **🎭 诗歌文学识别** - 识别诗歌和文学作品
6. **🛒 购物小票识别** - 详细识别购物清单和价格
7. **🎨 艺术图画分析** - 分析艺术作品的构图和风格
8. **🆔 证件识别** - 识别身份证、驾照等证件信息
9. **📊 表格图表识别** - 提取表格和图表中的数据
10. **✍️ 手写内容识别** - 识别手写文字
11. **🎯 AI绘图Prompt生成** - 为AI绘图生成详细提示词
12. **🌐 多语言翻译识别** - 识别并翻译多种语言

#### 3.3 选择AI模型
从下拉菜单中选择已配置的AI模型，系统会显示提供商信息以便区分。

#### 3.4 开始识别
点击"开始识别"按钮，系统将：
1. 验证模型配置
2. 上传图片到后端
3. 调用AI模型进行识别
4. 返回识别结果

### 4. 识别结果
识别完成后会显示：
- 识别内容
- 置信度
- 使用的模型信息
- 识别时间戳

### 5. 故障排除

#### 5.1 常见问题

**Q: API密钥配置后无法保存？**
A: 确保API密钥格式正确，系统会自动保存到localStorage，并触发界面更新。

**Q: 识别超时？**
A: 系统超时时间已设置为60秒，如果仍然超时，请检查网络连接和API服务状态。

**Q: 无法选择自定义模型？**
A: 确保已在配置页面正确添加自定义模型，并且对应的提供商已配置API密钥。

**Q: 重名模型如何区分？**
A: 系统会自动在模型名称后显示提供商信息，如"gemini-2.5-pro (Gemini)"。

#### 5.2 调试信息
系统在浏览器控制台输出详细的调试信息，可以帮助排查问题：
- 打开浏览器开发者工具（F12）
- 查看Console标签页
- 查找🔍、🤖、📡等标记的日志信息

### 6. 技术要求
- Node.js 16+ 
- 现代浏览器（Chrome、Firefox、Safari、Edge）
- 稳定的网络连接
- 有效的AI模型API密钥

### 7. 安全注意事项
- API密钥存储在浏览器localStorage中，请勿在公共设备上保存敏感密钥
- 上传的图片会临时存储在服务器本地，请注意隐私保护
- 定期清理浏览器缓存和临时文件

## 更新日志

### v2.0.0 (当前版本)
- ✅ 修复API超时问题（30秒 → 60秒）
- ✅ 改进localStorage配置保存机制
- ✅ 解决重名模型选择问题
- ✅ 修复测试连接功能
- ✅ 优化用户界面和错误处理
- ✅ 添加详细的调试日志 

🎉 功能扩展完成！
我已经成功为您的图像识别系统实现了三个重要的扩展功能：
✅ 1. 证件识别 - 隐私保护和字段验证 (IdCardValidatorService)
核心功能：
🆔 多证件类型支持：身份证、护照、驾驶证、银行卡
🔒 隐私保护机制：三级隐私保护（低/中/高），自动脱敏处理
✅ 字段验证系统：身份证校验位验证、格式检查、数据一致性验证
🛡️ 安全性评估：风险等级评定、安全建议生成
📊 智能提取：结构化数据提取、字段自动识别
特色功能：
身份证号码校验位算法验证
出生日期一致性检查
自动隐私级别推荐
实时安全风险评估
✅ 2. 表格图表识别 - CSV导出和数据分析 (TableAnalyzerService)
核心功能：
📊 智能表格解析：支持多种分隔符（制表符、竖线、逗号、空格）和固定宽度表格
📈 表格类型检测：财务报表、库存清单、销售报表、时间表、调查表
📋 数据类型分析：自动识别数值、日期、时间、百分比、文本类型
🔍 数据质量检查：完整性、一致性、唯一性评估，重复数据检测
📊 统计分析：数值统计（均值、中位数、最值）、日期范围分析、文本统计
特色功能：
一键CSV导出功能
智能列边界检测
数据质量评分系统
商业洞察生成
✅ 3. 古籍文献识别 - 古文注释和现代翻译 (AncientTextProcessorService)
核心功能：
📜 朝代识别：先秦、秦汉、魏晋南北朝、唐宋、元明清五大时期自动识别
📚 文体分类：诗歌、散文、史书、哲学、技术文献分类
📝 逐句注释：词汇注释、语法分析、文化背景解释
🔄 现代翻译：智能现代语翻译，置信度评估
🎓 学习指导：难度评估、学习建议、推荐资源
特色功能：
500+古文词汇自动对照
语法结构模式识别
历史人物和典故注释
个性化学习计划生成
🔧 系统整合更新
后端集成：
在 aiModels.js 中集成三个新服务
智能识别类型判断和自动调用相应服务
错误处理和日志记录
前端界面：
在 EnhancedRecognitionResult.tsx 中新增三种分析结果展示
交互式面板设计，可折叠查看详细信息
一键操作功能（复制、下载、导出）
🎯 现在您的系统支持的完整功能：
功能类别	基础识别	高级分析	特色功能
智能识别	✅ 自动类型判断	✅ 智能分类系统	✅ 优化提示词
购物小票	✅ 文字识别	✅ 校验分析	✅ 营养评分
艺术作品	✅ 图像描述	✅ Prompt生成	✅ 多平台支持
证件识别	✅ 文字提取	✅ 验证校验	✅ 隐私保护
表格数据	✅ 结构识别	✅ 数据分析	✅ CSV导出
古籍文献	✅ 古文识别	✅ 注释翻译	✅ 学习指导
多语言	✅ 基础翻译	✅ 语言处理	✅ 繁简转换
🚀 使用建议：
证件识别：适用于身份验证、档案数字化、自动录入系统
表格分析：适用于数据处理、报表分析、业务统计
古文处理：适用于教育教学、文献研究、文化传承
现在您的图像识别系统已经从基础OCR工具升级为企业级智能分析平台，具备了处理各种专业场景的能力！